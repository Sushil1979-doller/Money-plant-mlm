// -----------------------------
// 1. Plan Content (EN & HI)
// -----------------------------
const planContent = {
  en: `
    <h2>ЁЯМ┐ Money Plant Plan</h2>
    <h3>Introduction</h3>
    <p>Money Plant is a revolutionary, fully decentralized MLM system built on blockchain. Every 27 USDT you invest is transparently distributed via smart contracts, ensuring zero intermediaries and complete trust.</p>
    <h3>Objectives</h3>
    <ul>
      <li><b>Scam Prevention:</b> Eliminate fraud by peer-to-peer fund distribution.</li>
      <li><b>Stable Income:</b> Generate sustainable earnings for you and your network across generations.</li>
      <li><b>Financial Freedom:</b> Empower yourself with transparent, self-governed income opportunities.</li>
    </ul>
    <h3>Distribution (27 USDT)</h3>
    <ul>
      <li><b>9 USDT тЖТ Direct Sponsor:</b> Reward your direct upline for guiding you.</li>
      <li><b>1 USDT ├Ч 15 Uplines:</b> Earn level income by supporting higher tiers in your network.</li>
      <li><b>2 USDT тЖТ Refund Pool:</b> Secure capital return options for participants.</li>
      <li><b>1 USDT тЖТ Admin:</b> Cover platform maintenance and incentivize upgrades.</li>
    </ul>
    <h3>Income & Tree Structure</h3>
    <p>Earn 9 USDT instantly for each direct referral, plus 1 USDT from up to 16 levels of indirect referrals as your network expands.</p>
    <h3>Capital Return Options</h3>
    <ol>
      <li><b>Add Free Partner:</b> Invite a partner at no cost to boost team activity; profits shared 50/50; replace if inactive for 30 days.</li>
      <li><b>Replace Me:</b> Transfer your ID for 27 USDT to a new user; instantly recover your full capital.</li>
      <li><b>Quit Me:</b> Withdraw up to 0.27 USDT daily from the refund pool until your 27 USDT is fully returned.</li>
    </ol>
    <h3>Why Money Plant?</h3>
    <ul>
      <li><b>100% Transparent:</b> Smart contracts automate all distributions.</li>
      <li><b>Decentralized:</b> Community-driven growth without central authority.</li>
      <li><b>Unlimited Potential:</b> Build a vast network for exponential income.</li>
    </ul>
  `,
  hi: `
    <h2>ЁЯМ┐ рдордиреА рдкреНрд▓рд╛рдВрдЯ рдкреНрд▓рд╛рди</h2>
    <h3>рдкрд░рд┐рдЪрдп</h3>
    <p>Money Plant рдПрдХ рдХреНрд░рд╛рдВрддрд┐рдХрд╛рд░реА, рдкреВрд░реНрдг рд╡рд┐рдХреЗрдВрджреНрд░реАрдХреГрдд MLM рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬреЛ рдмреНрд▓реЙрдХрдЪреЗрди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред рдЖрдкрдХреЗ 27 USDT рдХрд╛ рдкреНрд░рддреНрдпреЗрдХ рдирд┐рд╡реЗрд╢ рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реИрдХреНрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд░рджрд░реНрд╢реА рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдмрд┐рдирд╛ рдХрд┐рд╕реА рдордзреНрдпрд╕реНрде рдХреЗред</p>
    <h3>рдЙрджреНрджреЗрд╢реНрдп</h3>
    <ul>
      <li><b>рдШреЛрдЯрд╛рд▓рд╛ рд░реЛрдХрдерд╛рдо:</b> рджреЛ рдкрдХреНрд╖реЛрдВ рдХреЗ рдмреАрдЪ рд╕реАрдзреЗ рдлрдВрдб рдЯреНрд░рд╛рдВрд╕рдлрд░ рд╕реЗ рдзреЛрдЦрд╛рдзрдбрд╝реА рдЦрддреНрдо рдХрд░реЗрдВред</li>
      <li><b>рд╕реНрдерд┐рд░ рдЖрдп:</b> рдЖрдк рдФрд░ рдЖрдкрдХреА рдЯреАрдо рдХреЗ рд▓рд┐рдП рдкреАрдврд╝реА-рджрд░-рдкреАрдврд╝реА рдХрдорд╛рдИ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред</li>
      <li><b>рдЖрд░реНрдерд┐рдХ рд╕реНрд╡рддрдВрддреНрд░рддрд╛:</b> рдкрд╛рд░рджрд░реНрд╢реА рдФрд░ рд╕реНрд╡рдпрдВ-рд╢рд╛рд╕рд┐рдд рдЖрдп рдХреЗ рдЕрд╡рд╕рд░ рдкреНрд░рджрд╛рди рдХрд░реЗрдВред</li>
    </ul>
    <h3>рд╡рд┐рддрд░рдг (27 USDT)</h3>
    <ul>
      <li><b>9 USDT тЖТ рдбрд╛рдпрд░реЗрдХреНрдЯ рд╕реНрдкреЙрдиреНрд╕рд░:</b> рдЖрдкрдХреЗ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП рдбрд╛рдпрд░реЗрдХреНрдЯ рдЕрдкрд▓рд╛рдЗрди рдХреЛ рдкреБрд░рд╕реНрдХреГрдд рдХрд░реЗрдВред</li>
      <li><b>1 USDT ├Ч 15 рдЙрдкреНрд▓рд╛рдЗрди:</b> рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдКрдкрд░реА рд╕реНрддрд░реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдХреЗ рд▓реЗрд╡рд▓ рдЖрдп рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред</li>
      <li><b>2 USDT тЖТ рд░рд┐рдлрдВрдб рдкреВрд▓:</b> рдкреНрд░рддрд┐рднрд╛рдЧрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдореВрд▓рдзрди рд╡рд╛рдкрд╕реА рдХреЗ рд╡рд┐рдХрд▓реНрдк рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░реЗрдВред</li>
      <li><b>1 USDT тЖТ рдПрдбрдорд┐рди:</b> рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рд░рдЦрд░рдЦрд╛рд╡ рдФрд░ рдЙрдиреНрдирдпрди рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрддреНрд╕рд╛рд╣рдиред</li>
    </ul>
    <h3>рдЗрдирдХрдо & рдЯреНрд░реА рд╕реНрдЯреНрд░рдХреНрдЪрд░</h3>
    <p>рдкреНрд░рддреНрдпреЗрдХ рдбрд╛рдпрд░реЗрдХреНрдЯ рд░реЗрдлрд░рд▓ рдкрд░ рдЖрдк 9 USDT рддреБрд░рдВрдд рдХрдорд╛рддреЗ рд╣реИрдВ, рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдмрдврд╝рдиреЗ рдкрд░ 16 рд╕реНрддрд░реЛрдВ рддрдХ рдЕрдкреНрд░рддреНрдпрдХреНрд╖ рд░реЗрдлрд░рд▓ рд╕реЗ 1 USDT рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред</p>
    <h3>рдореВрд▓рдзрди рд╡рд╛рдкрд╕реА рдХреЗ рд╡рд┐рдХрд▓реНрдк</h3>
    <ol>
      <li><b>рдПрдб рдлреНрд░реА рдкрд╛рд░реНрдЯрдирд░:</b> рдЯреАрдо рдЧрддрд┐рд╡рд┐рдзрд┐ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдореБрдлреНрдд рдкрд╛рд░реНрдЯрдирд░ рдЬреЛрдбрд╝реЗрдВ; 50/50 рд▓рд╛рдн рд╕рд╛рдЭрд╛; 30 рджрд┐рди inactivity рдкрд░ рдмрджрд▓рд╛рд╡ рдХрд░реЗрдВред</li>
      <li><b>рд░рд┐рдкреНрд▓реЗрд╕ рдореА:</b> рдЕрдкрдиреА ID 27 USDT рдореЗрдВ рдирдИ рдпреВрдЬрд╝рд░ рдХреЛ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд░реЗрдВ; рдкреВрд░рд╛ рдореВрд▓рдзрди рддреБрд░рдВрдд рд╡рд╛рдкрд╕ рдкрд╛рдПрдВред</li>
      <li><b>рдХреНрд╡рд┐рдЯ рдореА:</b> рд░рд┐рдлрдВрдб рдкреВрд▓ рд╕реЗ рджреИрдирд┐рдХ 0.27 USDT рддрдХ рдирд┐рдХрд╛рд╕реА рдХрд░реЗрдВ рдЬрдм рддрдХ рдЖрдкрдХрд╛ 27 USDT рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рд╡рд╛рдкрд╕ рди рд╣реЛ рдЬрд╛рдПред</li>
    </ol>
    <h3>рдХреНрдпреЛрдВ Money Plant?</h3>
    <ul>
      <li><b>100% рдкрд╛рд░рджрд░реНрд╢реА:</b> рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реИрдХреНрдЯ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рднреА рд╡рд┐рддрд░рдг рдХрд░рддрд╛ рд╣реИред</li>
      <li><b>рд╡рд┐рдХреЗрдВрджреНрд░реАрдХреГрдд:</b> рдХреЗрдВрджреНрд░реАрдп рд╕рддреНрддрд╛ рдХреЗ рдмрд┐рдирд╛ рд╕рдореБрджрд╛рдп рд╕рдВрдЪрд╛рд▓рд┐рдд рд╡рд┐рдХрд╛рд╕ред</li>
      <li><b>рдЕрд╕реАрдорд┐рдд рдХреНрд╖рдорддрд╛:</b> рд╡реНрдпрд╛рдкрдХ рдиреЗрдЯрд╡рд░реНрдХ рдмрдирд╛рдХрд░ рдЪрд░рдо рд╕реАрдорд╛ рддрдХ рдЖрдп рдмрдврд╝рд╛рдПрдВред</li>
    </ul>
  `
};

// Plain-text fallback for clipboard copy (strip HTML tags)
const planText = {
  en: planContent.en.replace(/<[^>]+>/g, '').trim(),
  hi: planContent.hi.replace(/<[^>]+>/g, '').trim()
};

let planLang = 'en';

// -----------------------------
// 2. Render Plan & Handlers
// -----------------------------
function renderPlan() {
  document.getElementById('planContent').innerHTML = planContent[planLang];
  document.getElementById('planLangBtn').textContent = planLang === 'en' ? 'рд╣рд┐рдВрджреА' : 'English';
}

function togglePlanLang() {
  planLang = planLang === 'en' ? 'hi' : 'en';
  renderPlan();
}

function copyPlan() {
  navigator.clipboard.writeText(planText[planLang]);
  alert(planLang === 'en'
    ? 'Plan copied to clipboard!'
    : 'рдкреНрд▓рд╛рди рдХреНрд▓рд┐рдкрдмреЛрд░реНрдб рдореЗрдВ рдХреЙрдкреА рд╣реЛ рдЧрдпрд╛!'
  );
}

// -----------------------------
// 3. Open & Close Plan Modal
// -----------------------------
function openPlanModal() {
  document.getElementById('planModal').style.display = 'block';
  document.body.classList.add('modal-open');
  renderPlan();
}

function closePlanModal() {
  document.getElementById('planModal').style.display = 'none';
  document.body.classList.remove('modal-open');
}

// -----------------------------
// 4. Inject тАЬView PlanтАЭ Link & Listeners
// -----------------------------
document.addEventListener('DOMContentLoaded', () => {
  // 4.1. Inject тАЬView PlanтАЭ link into .download-links if not already present
  const container = document.querySelector('.download-links');
  if (container && !document.querySelector('a#viewPlanBtn')) {
    const viewBtn = document.createElement('a');
    viewBtn.id = 'viewPlanBtn';
    viewBtn.href = '#';
    viewBtn.textContent = planLang === 'en' ? 'View Plan' : 'рдкреНрд▓рд╛рди рджреЗрдЦреЗрдВ';
    viewBtn.style.padding = '20px 30px';
    viewBtn.style.borderRadius = '50px';
    viewBtn.style.textDecoration = 'none';
    viewBtn.style.color = 'white';
    viewBtn.style.fontSize = '18px';
    viewBtn.style.fontWeight = 'bold';
    viewBtn.style.background = 'brown';
    // Insert before the existing links
    container.insertBefore(viewBtn, container.firstChild);

    viewBtn.addEventListener('click', (e) => {
      e.preventDefault();
      openPlanModal();
    });
  }

  // 4.2. Attach Plan Modal button listeners
  document.getElementById('planLangBtn').addEventListener('click', togglePlanLang);
  document.getElementById('copyPlanBtn').addEventListener('click', copyPlan);

  // 4.3. Close modal when clicking outside the modal content
  const planModal = document.getElementById('planModal');
  planModal.addEventListener('click', (e) => {
    if (e.target === planModal) {
      closePlanModal();
    }
  });
});
